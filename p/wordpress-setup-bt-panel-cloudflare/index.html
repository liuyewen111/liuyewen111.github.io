<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置） | Haib's Blog</title><meta name="author" content="Haib"><meta name="copyright" content="Haib"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="教程简介无需专业运维知识，2 小时内完成从服务器配置到网站上线的全流程！本教程将带你通过 宝塔面板（BT Panel） 和 Cloudflare，搭建一个优化、安全、稳定的 WordPress 站点，实现：  网站加载速度提升 50%+（缓存+CDN 优化） 自动防御 DDoS、恶意爬虫 等常见攻击 全程可视化操作，告别复杂命令行  教程目标与适用人群目标为以下用户提供保姆级解决方案：  新手站长">
<meta property="og:type" content="article">
<meta property="og:title" content="从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）">
<meta property="og:url" content="http://example.com/p/wordpress-setup-bt-panel-cloudflare/index.html">
<meta property="og:site_name" content="Haib&#39;s Blog">
<meta property="og:description" content="教程简介无需专业运维知识，2 小时内完成从服务器配置到网站上线的全流程！本教程将带你通过 宝塔面板（BT Panel） 和 Cloudflare，搭建一个优化、安全、稳定的 WordPress 站点，实现：  网站加载速度提升 50%+（缓存+CDN 优化） 自动防御 DDoS、恶意爬虫 等常见攻击 全程可视化操作，告别复杂命令行  教程目标与适用人群目标为以下用户提供保姆级解决方案：  新手站长">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/6471a2eb417f472e9e3e645b4ea1937a.webp">
<meta property="article:published_time" content="2025-05-18T12:30:00.000Z">
<meta property="article:modified_time" content="2025-05-28T13:14:48.703Z">
<meta property="article:author" content="Haib">
<meta property="article:tag" content="宝塔面板">
<meta property="article:tag" content="WordPress">
<meta property="article:tag" content="网站搭建">
<meta property="article:tag" content="Cloudflare">
<meta property="article:tag" content="建站教程">
<meta property="article:tag" content="插件优化">
<meta property="article:tag" content="CDN加速">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/6471a2eb417f472e9e3e645b4ea1937a.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）",
  "url": "http://example.com/p/wordpress-setup-bt-panel-cloudflare/",
  "image": "http://example.com/images/6471a2eb417f472e9e3e645b4ea1937a.webp",
  "datePublished": "2025-05-18T12:30:00.000Z",
  "dateModified": "2025-05-28T13:14:48.703Z",
  "author": [
    {
      "@type": "Person",
      "name": "Haib",
      "url": "http://example.com/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://example.com/p/wordpress-setup-bt-panel-cloudflare/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/6471a2eb417f472e9e3e645b4ea1937a.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Haib's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-18T12:30:00.000Z" title="发表于 2025-05-18 20:30:00">2025-05-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-28T13:14:48.703Z" title="更新于 2025-05-28 21:14:48">2025-05-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/WordPress/">WordPress</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>19分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="教程简介"><a href="#教程简介" class="headerlink" title="教程简介"></a>教程简介</h2><p>无需专业运维知识，2 小时内完成从服务器配置到网站上线的全流程！<br>本教程将带你通过 宝塔面板（BT Panel） 和 Cloudflare，搭建一个优化、安全、稳定的 WordPress 站点，实现：</p>
<ul>
<li>网站加载速度提升 50%+（缓存+CDN 优化）</li>
<li>自动防御 DDoS、恶意爬虫 等常见攻击</li>
<li>全程可视化操作，告别复杂命令行</li>
</ul>
<h3 id="教程目标与适用人群"><a href="#教程目标与适用人群" class="headerlink" title="教程目标与适用人群"></a>教程目标与适用人群</h3><h4 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h4><p>为以下用户提供保姆级解决方案：</p>
<ul>
<li>新手站长：想快速建站，但被服务器运维劝退的小白。</li>
<li>WordPress 用户：希望优化网站安全性和速度的现有站长。</li>
<li>服务器&#x2F;VPS 运维新手：买了 VPS 却不知如何高效管理。</li>
<li>SEO 从业者：需提升网站性能以适配搜索引擎规则。</li>
</ul>
<h4 id="技术栈价值"><a href="#技术栈价值" class="headerlink" title="技术栈价值"></a>技术栈价值</h4><table>
<thead>
<tr>
<th>工具</th>
<th>核心作用</th>
<th>你的收益</th>
</tr>
</thead>
<tbody><tr>
<td>宝塔面板</td>
<td>可视化安装 Nginx&#x2F;MySQL&#x2F;PHP</td>
<td>5 分钟完成环境配置，无需敲命令</td>
</tr>
<tr>
<td>Cloudflare</td>
<td>免费 CDN &#x2F; SSL &#x2F; 防火墙</td>
<td>访问速度↑，安全防护↑，成本 0</td>
</tr>
<tr>
<td>WordPress</td>
<td>全球最流行的 CMS</td>
<td>海量主题&#x2F;插件，轻松扩展功能</td>
</tr>
</tbody></table>
<h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><p>在开始前，请确保：</p>
<ul>
<li>拥有一台 VPS（推荐配置：1核CPU&#x2F;1GB内存&#x2F;10GB SSD），并能通过 SSH 连接（如 Xshell&#x2F;PuTTY）。</li>
<li>域名已托管至 Cloudflare（官网注册），可在后台管理 DNS 解析。</li>
<li>VPS 系统为 Linux（推荐：CentOS 7+&#x2F;Ubuntu 20.04+&#x2F;Debian 10+），具备 Root 或 sudo 权限。</li>
<li>基础技能：会复制粘贴命令行，能阅读英文文档（部分工具无中文版）。</li>
</ul>
<h3 id="技术栈详解"><a href="#技术栈详解" class="headerlink" title="技术栈详解"></a>技术栈详解</h3><h4 id="为什么选择这些工具"><a href="#为什么选择这些工具" class="headerlink" title="为什么选择这些工具"></a>为什么选择这些工具</h4><ul>
<li>宝塔面板<br>痛点解决：替代手工配置 Nginx、PHP、数据库的繁琐流程。<br>关键功能：一键部署 SSL证书、自动备份、实时监控。</li>
<li>Cloudflare<br>必开功能：CDN 缓存、SSL 全加密、防火墙规则（拦截恶意流量）。</li>
<li>WordPress 优化插件<br>预装推荐：WP Fastest Cache（缓存加速）、Wordfence（安全防护）、Rank Math（SEO优化）……</li>
</ul>
<h3 id="优化亮点对比"><a href="#优化亮点对比" class="headerlink" title="优化亮点对比"></a>优化亮点对比</h3><table>
<thead>
<tr>
<th>传统方式</th>
<th>本教程方案</th>
</tr>
</thead>
<tbody><tr>
<td>手动编译 Nginx</td>
<td>宝塔面板一键安装</td>
</tr>
<tr>
<td>自签 SSL 证书</td>
<td>Cloudflare 自动签发</td>
</tr>
<tr>
<td>需付费购买 CDN</td>
<td>Cloudflare 免费加速</td>
</tr>
</tbody></table>
<h2 id="环境准备：配置服务器与域名"><a href="#环境准备：配置服务器与域名" class="headerlink" title="环境准备：配置服务器与域名"></a>环境准备：配置服务器与域名</h2><h3 id="服务器基础配置"><a href="#服务器基础配置" class="headerlink" title="服务器基础配置"></a>服务器基础配置</h3><h4 id="切换到-Root-权限"><a href="#切换到-Root-权限" class="headerlink" title="切换到 Root 权限"></a>切换到 Root 权限</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>后续所有命令默认在 root 权限下执行。</p>
<h4 id="更新系统（必做）"><a href="#更新系统（必做）" class="headerlink" title="更新系统（必做）"></a>更新系统（必做）</h4><p>根据系统类型选择：</p>
<ul>
<li><p>CentOS：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y &amp;&amp; yum update -y &amp;&amp; yum install -y socat</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ubuntu&#x2F;Debian：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt install -y curl &amp;&amp; apt install -y socat</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Cloudflare-域名解析设置"><a href="#Cloudflare-域名解析设置" class="headerlink" title="Cloudflare 域名解析设置"></a>Cloudflare 域名解析设置</h3><h4 id="添加-A-记录（关键步骤）"><a href="#添加-A-记录（关键步骤）" class="headerlink" title="添加 A 记录（关键步骤）"></a>添加 A 记录（关键步骤）</h4><p>登录 Cloudflare 控制台，进入域名 DNS 设置。<br>添加记录：</p>
<ul>
<li>类型：A</li>
<li>名称：@（主域名）或 www（子域名）</li>
<li>IPv4 地址：填写你的 VPS IP</li>
<li>代理状态：开启（橙云图标）</li>
<li>TTL：自动</li>
</ul>
<blockquote>
<p>为什么开启代理？<br>  Cloudflare 会隐藏服务器真实 IP，防御 DDoS 攻击，并加速访问。</p>
</blockquote>
<h4 id="强制-SSL-加密（推荐）"><a href="#强制-SSL-加密（推荐）" class="headerlink" title="强制 SSL 加密（推荐）"></a>强制 SSL 加密（推荐）</h4><p>在 Cloudflare 的 SSL&#x2F;TLS → 概述 中：</p>
<ul>
<li>选择 “完全（Full）” 模式</li>
</ul>
<h3 id="防火墙配置（谨慎操作）"><a href="#防火墙配置（谨慎操作）" class="headerlink" title="防火墙配置（谨慎操作）"></a>防火墙配置（谨慎操作）</h3><h4 id="临时关闭系统防火墙"><a href="#临时关闭系统防火墙" class="headerlink" title="临时关闭系统防火墙"></a>临时关闭系统防火墙</h4><ul>
<li><p>CentOS：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ubuntu&#x2F;Debian：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw disable</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="云服务商安全组放行（重要！）"><a href="#云服务商安全组放行（重要！）" class="headerlink" title="云服务商安全组放行（重要！）"></a>云服务商安全组放行（重要！）</h4><p>如果使用 阿里云&#x2F;腾讯云&#x2F;AWS，需在控制台手动放行以下端口：</p>
<table>
<thead>
<tr>
<th>端口</th>
<th>用途</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>宝塔分配给你的随机端口</td>
<td>宝塔默认面板端口</td>
<td>安装后可修改</td>
</tr>
<tr>
<td>80</td>
<td>HTTP 流量</td>
<td>必开</td>
</tr>
<tr>
<td>443</td>
<td>HTTPS 流量</td>
<td>必开</td>
</tr>
<tr>
<td>22</td>
<td>SSH 连接</td>
<td>避免锁死服务器</td>
</tr>
</tbody></table>
<blockquote>
<p>安全提醒：<br>  安装宝塔面板完成后，建议重新启用防火墙。</p>
</blockquote>
<h3 id="服务器优化"><a href="#服务器优化" class="headerlink" title="服务器优化"></a>服务器优化</h3><h4 id="安装常用工具"><a href="#安装常用工具" class="headerlink" title="安装常用工具"></a>安装常用工具</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># CentOS</span><br><span class="line">yum install -y nano unzip git</span><br><span class="line"># Ubuntu/Debian</span><br><span class="line">apt install -y nano unzip git</span><br></pre></td></tr></table></figure>

<h4 id="重启服务器"><a href="#重启服务器" class="headerlink" title="重启服务器"></a>重启服务器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h2 id="宝塔面板安装与安全优化指南"><a href="#宝塔面板安装与安全优化指南" class="headerlink" title="宝塔面板安装与安全优化指南"></a>宝塔面板安装与安全优化指南</h2><h3 id="安装宝塔面板"><a href="#安装宝塔面板" class="headerlink" title="安装宝塔面板"></a>安装宝塔面板</h3><p>宝塔面板官方提供了一键安装脚本，支持 <strong>CentOS、Ubuntu 和 Debian</strong> 系统。</p>
<p><a target="_blank" rel="noopener" href="http://bt.cn/">宝塔面板官网</a></p>
<h4 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h4><ul>
<li><p>运行脚本后，系统会自动检测并安装所需环境。</p>
</li>
<li><p>过程中提示“**Do you want to install Bt-Panel to the &#x2F;www directory now? [y&#x2F;n]**”时，输入 y 并回车。</p>
</li>
<li><p>安装完成后，宝塔面板会显示 面板登录地址、用户名、密码，请妥善保存！</p>
</li>
</ul>
<h3 id="登录宝塔面板"><a href="#登录宝塔面板" class="headerlink" title="登录宝塔面板"></a>登录宝塔面板</h3><ul>
<li><p>打开浏览器，访问安装完成后提供的 面板地址（如 http:&#x2F;&#x2F;你的服务器IP:宝塔分配的随机端口&#x2F;安全入口）。</p>
</li>
<li><p>输入安装过程中提供的 用户名和密码，成功进入宝塔面板后台。</p>
</li>
<li><p>同意宝塔面板的条款，绑定一个宝塔账号，需要手机注册。</p>
</li>
<li><p>首次登录，系统会提示你安装 LNMP 或 LAMP 环境，推荐选择 LNMP（Nginx + MySQL + PHP），然后点击 一键安装。（10分钟左右）</p>
</li>
</ul>
<h3 id="设置宝塔面板基础安全"><a href="#设置宝塔面板基础安全" class="headerlink" title="设置宝塔面板基础安全"></a>设置宝塔面板基础安全</h3><h4 id="设置防火墙规则"><a href="#设置防火墙规则" class="headerlink" title="设置防火墙规则"></a>设置防火墙规则</h4><p>如果你的 VPS 使用 阿里云、腾讯云，需要在 安全组 放行以下端口：</p>
<ul>
<li><p>网站相关端口：80（HTTP）、443（HTTPS）</p>
</li>
<li><p>宝塔面板端口：你的面板端口（如 52088）</p>
</li>
<li><p>SSH 端口：默认的 SSH 端口 22</p>
</li>
</ul>
<h4 id="安装-Fail2Ban-防止网站被爆破"><a href="#安装-Fail2Ban-防止网站被爆破" class="headerlink" title="安装 Fail2Ban 防止网站被爆破"></a>安装 Fail2Ban 防止网站被爆破</h4><ul>
<li><p>进入 软件管理，搜索 Fail2Ban，点击安装。</p>
</li>
<li><p>后续可以对你的WordPress网站进行防护。</p>
</li>
<li><p>进入 软件管理 &gt; 已安装 &gt;Fail2Ban &gt; 设置&gt; 服务保护，添加以下参数：<br><img src="https://images.haib.top/img/41d7574031d340c7adf05578bf61b7ac.webp"></p>
</li>
<li><p>点击确认。</p>
</li>
<li><p>记得开启软件。</p>
</li>
</ul>
<h4 id="通过-Cloudflare-IP-白名单限制80、443端口的访问"><a href="#通过-Cloudflare-IP-白名单限制80、443端口的访问" class="headerlink" title="通过 Cloudflare IP 白名单限制80、443端口的访问"></a>通过 Cloudflare IP 白名单限制80、443端口的访问</h4><p>简单说，只允许 Cloudflare 的 IP 范围访问你的服务器。具体做法：</p>
<ul>
<li><p>进入 <strong>安全</strong> ，按照以下方法操作：</p>
</li>
<li><p>搜索80端口，然后全选并删除。</p>
</li>
<li><p>搜索443端口，然后全选并删除。</p>
</li>
<li><p>获取 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/ips-v4/#">Cloudflare 的 IP 段</a>。</p>
</li>
<li><p>回到安全页面，点击添加端口规则，添加<strong>443和80</strong>端口，协议选择TCP，端口选择80,443，来源选择<strong>指定IP</strong>，指定IP来自Cloudflare 的 IP 段，策略选择<strong>放行</strong>，方向选择入站（默认）备注填写<strong>cloudflare</strong>。<br><img src="https://images.haib.top/img/dd371679278a4c098180dfc9dc1703a1.webp"></p>
</li>
<li><p>点击确定。</p>
</li>
<li><p>配置防火墙规则，屏蔽所有其他来源的访问。</p>
</li>
</ul>
<h4 id="重新设置宝塔面板的账号和密码"><a href="#重新设置宝塔面板的账号和密码" class="headerlink" title="重新设置宝塔面板的账号和密码"></a>重新设置宝塔面板的账号和密码</h4><p>进入 <strong>设置</strong>，修改<strong>面板账号</strong>和<strong>面板密码</strong>，然后重新登录面板。</p>
<h3 id="服务器性能优化"><a href="#服务器性能优化" class="headerlink" title="服务器性能优化"></a>服务器性能优化</h3><h4 id="调整-PHP-配置，提高-WordPress-兼容性"><a href="#调整-PHP-配置，提高-WordPress-兼容性" class="headerlink" title="调整 PHP 配置，提高 WordPress 兼容性"></a>调整 PHP 配置，提高 WordPress 兼容性</h4><p>进入 软件管理 &gt; 已安装 &gt;PHP &gt; 设置&gt; 配置修改，找到以下参数并调整：</p>
<p>post_max_size改为<strong>2048M</strong></p>
<p>进入 软件管理 &gt; 已安装 &gt;PHP &gt; 设置&gt; 上传限制，找到以下参数并调整：</p>
<p>将框内的数字改为<strong>2048MB</strong>，然后点保存</p>
<p>进入 软件管理 &gt; 已安装 &gt;PHP &gt; 设置&gt; 安装扩展，找到以下扩展并安装：</p>
<ul>
<li><p>opcache</p>
</li>
<li><p>fileinfo</p>
</li>
<li><p>redis</p>
</li>
<li><p>imagemagick</p>
</li>
<li><p>igbinary</p>
</li>
</ul>
<p>保存后在服务那一栏重启 PHP，让配置生效。</p>
<h4 id="调整-Nginx-配置，提高-WordPress-速度"><a href="#调整-Nginx-配置，提高-WordPress-速度" class="headerlink" title="调整 Nginx 配置，提高 WordPress 速度"></a>调整 Nginx 配置，提高 WordPress 速度</h4><p>进入 软件管理 &gt; 已安装 &gt;Nginx &gt; 设置&gt; 性能调整，找到以下参数并调整：</p>
<ul>
<li><p>gzip选择开启</p>
</li>
<li><p>client_max_body_size填写<strong>2048</strong></p>
</li>
</ul>
<p>保存后在服务那一栏重启 Nginx，让配置生效。</p>
<h4 id="安装-Redis-提高缓存性能"><a href="#安装-Redis-提高缓存性能" class="headerlink" title="安装 Redis 提高缓存性能"></a>安装 Redis 提高缓存性能</h4><ul>
<li><p>进入 软件管理，搜索 Redis，点击安装。（如果显示已安装就不用在安装了）</p>
</li>
<li><p>后续 WordPress 可以通过缓存插件启用 Redis 缓存，提高访问速度。</p>
</li>
<li><p>记得开启软件。</p>
</li>
</ul>
<h4 id="安装-Linux工具箱"><a href="#安装-Linux工具箱" class="headerlink" title="安装 Linux工具箱"></a>安装 Linux工具箱</h4><ul>
<li><p>进入 软件管理，搜索 Linux工具箱，点击安装。</p>
</li>
<li><p>点击设置，进入<strong>DNS设置</strong>，修改一个适合你VPS的DNS，（一般来说是8.8.8.8和8.8.4.4）点击保存。</p>
</li>
<li><p>进入<strong>Swap&#x2F;虚拟内存</strong>，添加虚拟内存。（最好问下AI，让AI帮你分析分析）</p>
<ul>
<li>swap是Linux下的虚拟内存，设置适当的swap可增加服务器稳定性</li>
<li>建议swap容量在真实内存容量的1.5倍左右，若您的服务器内存大于4GB，可设1-2GB的固定值</li>
<li>swap文件默认保存在&#x2F;www&#x2F;swap，设置前请确保磁盘空间够用</li>
<li>若您不需要swap，请将容量设为0</li>
<li>OVZ虚拟架构机器不可用此功能</li>
</ul>
</li>
<li><p>进入<strong>时区设置</strong>，设置时区为<strong>Asia Shanghai</strong>，点击确定。（最好问下AI，让AI帮你分析分析）</p>
</li>
</ul>
<h2 id="WordPress一键部署与HTTPS配置指南"><a href="#WordPress一键部署与HTTPS配置指南" class="headerlink" title="WordPress一键部署与HTTPS配置指南"></a>WordPress一键部署与HTTPS配置指南</h2><h3 id="登录宝塔面板并创建新站点"><a href="#登录宝塔面板并创建新站点" class="headerlink" title="登录宝塔面板并创建新站点"></a>登录宝塔面板并创建新站点</h3><h4 id="登录宝塔面板后台"><a href="#登录宝塔面板后台" class="headerlink" title="登录宝塔面板后台"></a>登录宝塔面板后台</h4><p>使用你的账号和密码进入宝塔面板后台管理系统。</p>
<h3 id="进入站点管理界面"><a href="#进入站点管理界面" class="headerlink" title="进入站点管理界面"></a>进入站点管理界面</h3><p>在左侧导航栏中选择网站，点击添加站点以开始新站点的配置。</p>
<h3 id="配置新站点基础信息"><a href="#配置新站点基础信息" class="headerlink" title="配置新站点基础信息"></a>配置新站点基础信息</h3><h4 id="启用一键部署功能"><a href="#启用一键部署功能" class="headerlink" title="启用一键部署功能"></a>启用一键部署功能</h4><p>在站点管理页面中，点击右侧的一键部署按钮。</p>
<h4 id="选择部署模板"><a href="#选择部署模板" class="headerlink" title="选择部署模板"></a>选择部署模板</h4><p>在弹出的模板部署选项中选择 WordPress 模板，系统将自动加载相关部署参数。</p>
<h4 id="填写域名信息"><a href="#填写域名信息" class="headerlink" title="填写域名信息"></a>填写域名信息</h4><p>在域名输入框中填写已通过 Cloudflare 解析至你服务器 IP 的域名，例如：test.haib.top。</p>
<h4 id="设置网站根目录"><a href="#设置网站根目录" class="headerlink" title="设置网站根目录"></a>设置网站根目录</h4><p>通常保持自动生成的站点根目录设置即可，如果有特殊需求可手动修改。</p>
<h4 id="调整其他配置项"><a href="#调整其他配置项" class="headerlink" title="调整其他配置项"></a>调整其他配置项</h4><p>默认配置项已满足大部分需求，若需调整请点击编辑配置进行详细设置。<br>此处主要需要关注 PHP 版本 的选择：</p>
<ul>
<li>在PHP版本下拉菜单中选择合适的版本（这里的PHP一定要选择上你篇文章你优化过的那个PHP版本）。<br><img src="https://images.haib.top/img/ccc89b7af46642bb98080f07b4527077.webp"></li>
</ul>
<h4 id="提交站点配置"><a href="#提交站点配置" class="headerlink" title="提交站点配置"></a>提交站点配置</h4><p>确认所有信息无误后，点击确定。宝塔面板将自动创建站点、配置环境，并一键部署最新的 WordPress 安装包。</p>
<h4 id="等待部署完成"><a href="#等待部署完成" class="headerlink" title="等待部署完成"></a>等待部署完成</h4><p>提交配置后，系统会自动进行下载、解压、配置及数据库等相关工作。部署成功后，你会获得 WordPress 后台的登录地址及MySQL数据库的信息，请妥善保存！</p>
<h3 id="配置SSL证书"><a href="#配置SSL证书" class="headerlink" title="配置SSL证书"></a>配置SSL证书</h3><h4 id="Cloudflare-SSL-源证书申请"><a href="#Cloudflare-SSL-源证书申请" class="headerlink" title="Cloudflare SSL 源证书申请"></a>Cloudflare SSL 源证书申请</h4><p>当你的域名托管在 Cloudflare 上后，Cloudflare 会自动为访问者提供加密连接。但为了确保服务器与 Cloudflare 之间的通信也同样安全，你可以申请 Cloudflare 的 源证书（Origin Certificate），并将其部署到你的网站上。以下是详细的操作步骤：</p>
<h5 id="登录-Cloudflare-控制面板"><a href="#登录-Cloudflare-控制面板" class="headerlink" title="登录 Cloudflare 控制面板"></a>登录 Cloudflare 控制面板</h5><ul>
<li><p>使用你的 Cloudflare 账户登录 Cloudflare 仪表盘。</p>
</li>
<li><p>在仪表盘中选择需要配置 SSL 的域名。</p>
</li>
</ul>
<h5 id="进入-SSL-TLS-设置"><a href="#进入-SSL-TLS-设置" class="headerlink" title="进入 SSL&#x2F;TLS 设置"></a>进入 SSL&#x2F;TLS 设置</h5><ul>
<li>在域名概览页面，点击顶部导航栏中的 “SSL&#x2F;TLS” 标签。</li>
</ul>
<h5 id="切换到-“源服务器”-标签"><a href="#切换到-“源服务器”-标签" class="headerlink" title="切换到 “源服务器” 标签"></a>切换到 “源服务器” 标签</h5><ul>
<li>在 SSL&#x2F;TLS 页面中，找到并点击 “源服务器” 选项卡。这部分用于管理服务器与 Cloudflare 之间的加密通信。</li>
</ul>
<h5 id="创建源证书"><a href="#创建源证书" class="headerlink" title="创建源证书"></a>创建源证书</h5><ul>
<li><p>点击 “Create Certificate”（创建证书） 按钮。</p>
</li>
<li><p>系统会提示你选择证书的类型（例如 RSA 或 ECC），以及有效期（默认一般为 15 年）。</p>
</li>
<li><p>在 “Hostnames”（主机名） 输入框中，默认会填写 *.&lt;yourdomain.com&gt; 和 &lt;yourdomain.com&gt;，这表示该证书适用于所有子域名和根域名。你可以根据实际需求调整。</p>
</li>
<li><p>点击 “Next”（下一步） 后，Cloudflare 会生成一对证书文件：</p>
</li>
<li><p>Origin Certificate（源证书）：这是公开给 Cloudflare 使用的证书文件。（对应证书(PEM格式)）</p>
</li>
<li><p>Private Key（私钥）：这是与证书匹配的私钥，只会出现一次，必须妥善保存，不得泄露。（对应密钥(KEY)）</p>
</li>
</ul>
<h5 id="复制证书和私钥内容"><a href="#复制证书和私钥内容" class="headerlink" title="复制证书和私钥内容"></a>复制证书和私钥内容</h5><ul>
<li><p>将生成的 源证书 和 私钥 分别复制下来，准备在网站上进行配置。</p>
</li>
<li><p>注意：源证书仅对从 Cloudflare 反向代理访问你的站点时有效。如果直接使用服务器 IP 访问，将显示不受信任的警告。</p>
</li>
</ul>
<h3 id="宝塔上-WordPress-站点的-SSL-证书对接"><a href="#宝塔上-WordPress-站点的-SSL-证书对接" class="headerlink" title="宝塔上 WordPress 站点的 SSL 证书对接"></a>宝塔上 WordPress 站点的 SSL 证书对接</h3><p>在前面申请 Cloudflare 源证书后，接下来需要将该证书部署到宝塔面板上的 WordPress 站点中。这一步骤可以确保服务器与 Cloudflare 之间的通信同样采用加密传输，进一步提高安全性。</p>
<h4 id="进入-SSL-证书配置界面"><a href="#进入-SSL-证书配置界面" class="headerlink" title="进入 SSL 证书配置界面"></a>进入 SSL 证书配置界面</h4><ul>
<li>在站点详情页顶部或左侧菜单中，点击SSL选项卡，进入证书管理页面。</li>
</ul>
<h4 id="配置-SSL-证书"><a href="#配置-SSL-证书" class="headerlink" title="配置 SSL 证书"></a>配置 SSL 证书</h4><ul>
<li>选择自定义证书</li>
</ul>
<p>在 SSL 配置页面，选择当前证书。</p>
<ul>
<li>粘贴证书信息</li>
</ul>
<p>在证书(PEM格式)文本框中粘贴从 Cloudflare 申请获得的 源证书。</p>
<p>在密钥(KEY)文本框中粘贴对应的 私钥。</p>
<ul>
<li><p>确认证书</p>
</li>
<li><p>确认所有信息正确无误后，点击保存，完成证书绑定。<br><img src="https://images.haib.top/img/27b36826ce1343f49c1e006a41c90662.webp"></p>
</li>
</ul>
<h3 id="启用-HTTPS-及其他相关设置"><a href="#启用-HTTPS-及其他相关设置" class="headerlink" title="启用 HTTPS 及其他相关设置"></a>启用 HTTPS 及其他相关设置</h3><ul>
<li>强制 HTTPS</li>
</ul>
<p>在 SSL 配置页面中，可启用强制 HTTPS功能，确保所有 HTTP 请求自动跳转至 HTTPS。</p>
<p>这样可以防止用户因访问不安全链接而触发浏览器警告。</p>
<ul>
<li>重启 Nginx 服务</li>
</ul>
<p>保存配置后，建议重启 Nginx 服务器，确保新配置生效。</p>
<h3 id="启用伪静态"><a href="#启用伪静态" class="headerlink" title="启用伪静态"></a>启用伪静态</h3><p>在左侧菜单中，点击伪静态选项卡，在复选框里一直拉到最下面倒数第三个你可以看到有一个WordPress，选择WordPress，然后点击保存。<br><img src="https://images.haib.top/img/96a4670df45c4e35aa5ada3d944043ad.webp"></p>
<h3 id="完成WordPress安装向导"><a href="#完成WordPress安装向导" class="headerlink" title="完成WordPress安装向导"></a>完成WordPress安装向导</h3><h4 id="访问安装页面"><a href="#访问安装页面" class="headerlink" title="访问安装页面"></a>访问安装页面</h4><p>在浏览器访问：<a target="_blank" rel="noopener" href="https://yourdomain.com/wp-admin/install.php">https://yourdomain.com/wp-admin/install.php</a></p>
<h4 id="填写数据库信息"><a href="#填写数据库信息" class="headerlink" title="填写数据库信息"></a>填写数据库信息</h4><p>输入宝塔自动创建的数据库信息：复制数据库名：之前记录的数据库名称 用户名：数据库用户名 密码：数据库密码 数据库主机：localhost（默认） 表前缀：wp_（建议修改为如wp9x_等随机前缀）</p>
<h4 id="完成安装配置"><a href="#完成安装配置" class="headerlink" title="完成安装配置"></a>完成安装配置</h4><p>填写站点基本信息：复制站点标题：您的网站名称 用户名：管理员账号（建议不要使用admin） 密码：使用强密码（12位以上，含大小写、数字、符号） 您的电子邮箱：有效的管理邮箱</p>
<p>取消勾选「建议搜索引擎不索引本站点」（除非是测试站）</p>
<p>点击「安装WordPress」</p>
<h4 id="初始配置优化"><a href="#初始配置优化" class="headerlink" title="初始配置优化"></a>初始配置优化</h4><h5 id="基础设置"><a href="#基础设置" class="headerlink" title="基础设置"></a>基础设置</h5><p>登录后台（<code>https://yourdomain.com/wp-admin</code>）</p>
<p>进入「设置」→「常规」：</p>
<p>WordPress地址和站点地址改为HTTPS版本</p>
<p>时区设置为「上海」</p>
<p>日期格式按需调整</p>
<h5 id="固定链接设置"><a href="#固定链接设置" class="headerlink" title="固定链接设置"></a>固定链接设置</h5><p>进入「设置」→「固定链接」</p>
<p>选择「自定义」模式，<code>/%post_id%.html</code></p>
<p>点击保存更改</p>
<h2 id="WordPress安全与性能全面优化指南"><a href="#WordPress安全与性能全面优化指南" class="headerlink" title="WordPress安全与性能全面优化指南"></a>WordPress安全与性能全面优化指南</h2><h3 id="安全优化"><a href="#安全优化" class="headerlink" title="安全优化"></a>安全优化</h3><p>隐藏登录地址（WPS Hide Login）<br>启用 Web 防火墙（Cloudflare WAF + Wordfence Security）<br>定期备份和网站迁移（WPvivid）</p>
<h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><p>启用对象缓存（Redis Object Cache）<br>启用页面缓存（WP Fastest Cache）<br>压缩 &amp; 合并 CSS&#x2F;JS（Autoptimize）<br>压缩图片&amp;图片懒加载 （Smush）<br>启用 WebP（Converter for Media）<br>使用 Cloudflare CDN 加速（Cloudflare + WP Fastest Cache）<br>优化 MySQL （Advanced Database Cleaner）</p>
<h2 id="多方面增强网站安全配置指南"><a href="#多方面增强网站安全配置指南" class="headerlink" title="多方面增强网站安全配置指南"></a>多方面增强网站安全配置指南</h2><h3 id="部署Cloudflare的WAF规则"><a href="#部署Cloudflare的WAF规则" class="headerlink" title="部署Cloudflare的WAF规则"></a>部署Cloudflare的WAF规则</h3><h4 id="放行自己原站IP"><a href="#放行自己原站IP" class="headerlink" title="放行自己原站IP"></a>放行自己原站IP</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ip.src eq 33.222.44.22) or (ip.src eq 	247e:356:1c13:3080:2888:dc53:addd:5888)</span><br></pre></td></tr></table></figure>

<h4 id="放行SEO爬虫"><a href="#放行SEO爬虫" class="headerlink" title="放行SEO爬虫"></a>放行SEO爬虫</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cf.client.bot) or (http.user_agent contains &quot;duckduckgo&quot;) or (http.user_agent contains &quot;facebookexternalhit&quot;) or (http.user_agent contains &quot;Feedfetcher-Google&quot;) or (http.user_agent contains &quot;LinkedInBot&quot;) or (http.user_agent contains &quot;Mediapartners-Google&quot;) or (http.user_agent contains &quot;msnbot&quot;) or (http.user_agent contains &quot;Slackbot&quot;) or (http.user_agent contains &quot;TwitterBot&quot;) or (http.user_agent contains &quot;ia_archive&quot;) or (http.user_agent contains &quot;yahoo&quot;)</span><br></pre></td></tr></table></figure>

<h4 id="屏蔽国外"><a href="#屏蔽国外" class="headerlink" title="屏蔽国外"></a>屏蔽国外</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ip.src.country ne &quot;CN&quot; and ip.src.country ne &quot;HK&quot; and ip.src.country ne &quot;TW&quot; and ip.src.country ne &quot;MO&quot;)</span><br></pre></td></tr></table></figure>

<h4 id="质询恶意流量"><a href="#质询恶意流量" class="headerlink" title="质询恶意流量"></a>质询恶意流量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cf.threat_score ge 5 and not cf.client.bot) or (not http.request.version in &#123;&quot;HTTP/2&quot; &quot;HTTP/3&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="质询恶意浏览-增强版）"><a href="#质询恶意浏览-增强版）" class="headerlink" title="质询恶意浏览(增强版）"></a>质询恶意浏览(增强版）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">(http.request.uri.query contains &quot;)/*&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;)--&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;benchmark(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&#x27;0:0:20&#x27;&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;MD5(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%20waitfor%20delay%20&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%22&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%20/*&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%20--&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%20%23&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;)%23&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;script&gt;&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%40&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%00&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&lt;?php&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x00&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x08&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x09&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x0a&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x0d&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x1a&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x22&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x25&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x27&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x5c&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x5f&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;SELECT&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;concat&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;union&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x50&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;DROP&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;WHERE&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;ONION&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x3c62723e3c62723e3c62723e&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x3c696d67207372633d22&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;OR&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;0x3e&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&lt;img&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&lt;image&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;document.cookie&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;onerror()&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;alert(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;window.&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;String.fromCharCode(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;javascript:&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;onmouseover=&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&lt;BODY onload&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&lt;style&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;svg onload&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;substring(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;length(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;version(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;database(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;user(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;AND 1=1&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;AND 1=2&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;OR 1=1&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;OR 1=2&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%27OR1=1--&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;UNION ALL SELECT&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;/etc/passwd&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;../../&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;/proc/self/environ&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;file=&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;page=&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;http://&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;ftp://&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;data://&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;|cat&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;&amp;&amp;&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;||&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;`&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;$(&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;ping&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;curl&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;wget&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%0d%0a&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%0a&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;%0d&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;phpinfo()&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;hostname&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;whoami&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;uname -a&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;pwd&quot;) or </span><br><span class="line">(http.request.uri.query contains &quot;netstat&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="部署频率限制"><a href="#部署频率限制" class="headerlink" title="部署频率限制"></a>部署频率限制</h3><p>在“WAF”页面，选择“<strong>速率限制规则</strong>”选项卡。</p>
<p>点击“<strong>创建速率限制规则</strong>”。</p>
<p>设置规则名称，例如“防止 CC 攻击”。​</p>
<p>定义条件，例如：​</p>
<p><strong>URI 路径</strong>：选择“包含”，输入“&#x2F;”。<br><img src="https://images.haib.top/img/291280f2fb394e4baf65024d36d4050f.webp"><br>设置阈值：​</p>
<p><strong>当速率超过…：200和10 秒</strong>。</p>
<p><strong>持续时间达…：10秒</strong>。</p>
<p>操作选择“<strong>阻止</strong>”，然后部署该规则。​<br><img src="https://images.haib.top/img/5171adcffc4b4a7aa2c819a1d32a242f.webp"><br>此设置有助于防止 CC（Challenge Collapsar）攻击，保护服务器资源。</p>
<h3 id="设置Fail2Ban"><a href="#设置Fail2Ban" class="headerlink" title="设置Fail2Ban"></a>设置Fail2Ban</h3><p>进入 软件管理 &gt; 已安装 &gt;Fail2Ban &gt; 设置&gt; 站点保护，创建网站保护。<br><img src="https://images.haib.top/img/f537c49da0084ddcb17a01c418d78b75.webp"><br>站点那里选择你的站点，例如<code>test.haib.top</code>。</p>
<p>然后点击确认。</p>
<p>进入 安全 &gt; SSH管理 &gt;SSH安全防护</p>
<p>将<strong>SSH安全防护</strong>打开</p>
<p>点击<strong>配置</strong> </p>
<p>最大重试次数：1次<br>周期：300秒<br>禁止时间：86400秒</p>
<p>然后点击确认。</p>
<h3 id="设置Nginx免费防火墙"><a href="#设置Nginx免费防火墙" class="headerlink" title="设置Nginx免费防火墙"></a>设置Nginx免费防火墙</h3><p>进入 软件管理 &gt; 第三方应用 &gt; Nginx免费防火墙 &gt; 安装。</p>
<p>安装后，点击<strong>设置</strong></p>
<p><strong>全局配置</strong>中的<strong>禁止海外访问</strong>关掉</p>
<p>找到<strong>站点配置</strong>中的WordPress网站，将<strong>状态</strong>开启，<strong>POST</strong>关掉，打开<strong>CDN</strong></p>
<p>其它默认。</p>
<p>完成上述配置后，Cloudflare WAF、Fail2Ban和Nginx免费防火墙将有效地保护您的网站免受常见的网络攻击。</p>
<blockquote>
<p>引用资料<br>  <a target="_blank" rel="noopener" href="https://joeyblog.net/%E7%BD%91%E7%BB%9C%E5%AE%88%E6%8A%A4%E8%80%85%E7%89%A9%E8%AF%AD%EF%BC%9A%E7%94%A8-waf-%E6%89%93%E8%B7%91%E5%9D%8F%E8%9B%8B%E4%BB%AC%E7%9A%84%E5%8F%AF%E7%88%B1%E5%86%92%E9%99%A9%EF%BC%81.html">https://joeyblog.net/网络守护者物语：用-waf-打跑坏蛋们的可爱冒险！.html</a><br>  <a target="_blank" rel="noopener" href="https://blog.kejilion.pro/cf-waf">https://blog.kejilion.pro/cf-waf</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Haib</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/p/wordpress-setup-bt-panel-cloudflare/">http://example.com/p/wordpress-setup-bt-panel-cloudflare/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Haib's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF/">宝塔面板</a><a class="post-meta__tags" href="/tags/WordPress/">WordPress</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/">网站搭建</a><a class="post-meta__tags" href="/tags/Cloudflare/">Cloudflare</a><a class="post-meta__tags" href="/tags/%E5%BB%BA%E7%AB%99%E6%95%99%E7%A8%8B/">建站教程</a><a class="post-meta__tags" href="/tags/%E6%8F%92%E4%BB%B6%E4%BC%98%E5%8C%96/">插件优化</a><a class="post-meta__tags" href="/tags/CDN%E5%8A%A0%E9%80%9F/">CDN加速</a></div><div class="post-share"><div class="social-share" data-image="/images/6471a2eb417f472e9e3e645b4ea1937a.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/p/hidns-free-domain-guide/" title="HiDNS 终身免费域名详细申请流程（零基础新手友好教程）"><img class="cover" src="/images/9e61239f07784140a375f5198686b4c7.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">HiDNS 终身免费域名详细申请流程（零基础新手友好教程）</div></div><div class="info-2"><div class="info-item-1">HiDNS 条件说明HiDNS 近日对其免费域名服务进行了重要调整。如果你之前是通过“优惠券”方式申请免费域名的用户，请注意：现在申请流程已经改为人工审核制，操作方式也发生了变化。 如何申请免费域名？目前，所有免费域名申请都需要通过提交工单的方式，由管理员进行人工审核。以下是申请流程要点：  提交域名申请后，请务必发送工单说明该域名的用途； 建议将域名用于博客或其他网络服务（如个人网站、技术项目等）； 管理员将在 24 小时内完成审核并激活域名； 激活后 7 天内必须绑定到实际用途，否则将被删除； 每位用户仅限申请一个域名，禁止多账号注册，违者全部封禁。  如何获得“永久免费”资格？如果你希望你的域名能一直免费使用，直到 2099 年 12 月 31 日 23:59:59，你需要满足以下条件：  将域名成功绑定到你的博客或其他网络服务； 为该域名配置有效的 SSL...</div></div></div></a><a class="pagination-related" href="/p/google-signup-no-phone/" title="想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号"><img class="cover" src="/images/b4f90681a5894076b5dc38296c462071.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号</div></div><div class="info-2"><div class="info-item-1">前言注册 Google 账号时，很多用户会遇到“必须填写手机号验证码”的强制步骤。但其实，在某些情况下是可以跳过手机验证的。下面介绍一种目前实测有效的方法，只需使用 Edge 浏览器并配合一定的操作，即可大概率跳过手机号验证。 操作流程清除 Google 的 Cookie 数据 打开 Microsoft Edge 浏览器，进入 Google 首页。 点击地址栏左侧的SSL 小锁图标，选择「Cookie 和站点数据」。 在弹出的窗口中，点击「Cookie（正在使用 xx 个）」。 找到并选中 google.com 的 Cookie，点击下方的「删除」，然后点击「完成」。  启动无痕浏览窗口 新建一个无痕窗口。 访问 Google 首页。  开始注册账号 点击右上角的 Gmail → 创建账号 → 为个人用途创建。 按照提示填写基本信息（姓名、用户名、密码等）。 此时，注册流程通常会跳过手机号验证，直接进入辅助邮箱验证的步骤。  如果仍然要求手机号验证如果系统仍然提示需要绑定手机号，可以尝试使用 +86 的中国大陆手机号 进行验证,在 Edge 浏览器的隐私窗口中使用 +86...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC82MDY5My8zNzE2NA=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Haib</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/1775420054"><i class="fas fa-link"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:liuywewen111@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">教程简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E7%9B%AE%E6%A0%87%E4%B8%8E%E9%80%82%E7%94%A8%E4%BA%BA%E7%BE%A4"><span class="toc-number">1.1.</span> <span class="toc-text">教程目标与适用人群</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">1.1.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88%E4%BB%B7%E5%80%BC"><span class="toc-number">1.1.2.</span> <span class="toc-text">技术栈价值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">前提条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.3.</span> <span class="toc-text">技术栈详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9%E8%BF%99%E4%BA%9B%E5%B7%A5%E5%85%B7"><span class="toc-number">1.3.1.</span> <span class="toc-text">为什么选择这些工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E4%BA%AE%E7%82%B9%E5%AF%B9%E6%AF%94"><span class="toc-number">1.4.</span> <span class="toc-text">优化亮点对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8E%E5%9F%9F%E5%90%8D"><span class="toc-number">2.</span> <span class="toc-text">环境准备：配置服务器与域名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">2.1.</span> <span class="toc-text">服务器基础配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%88%B0-Root-%E6%9D%83%E9%99%90"><span class="toc-number">2.1.1.</span> <span class="toc-text">切换到 Root 权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%BF%85%E5%81%9A%EF%BC%89"><span class="toc-number">2.1.2.</span> <span class="toc-text">更新系统（必做）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloudflare-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">Cloudflare 域名解析设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-A-%E8%AE%B0%E5%BD%95%EF%BC%88%E5%85%B3%E9%94%AE%E6%AD%A5%E9%AA%A4%EF%BC%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">添加 A 记录（关键步骤）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6-SSL-%E5%8A%A0%E5%AF%86%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">2.2.2.</span> <span class="toc-text">强制 SSL 加密（推荐）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE%EF%BC%88%E8%B0%A8%E6%85%8E%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">防火墙配置（谨慎操作）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%85%B3%E9%97%AD%E7%B3%BB%E7%BB%9F%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">2.3.1.</span> <span class="toc-text">临时关闭系统防火墙</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%95%86%E5%AE%89%E5%85%A8%E7%BB%84%E6%94%BE%E8%A1%8C%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-number">2.3.2.</span> <span class="toc-text">云服务商安全组放行（重要！）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96"><span class="toc-number">2.4.</span> <span class="toc-text">服务器优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7"><span class="toc-number">2.4.1.</span> <span class="toc-text">安装常用工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.4.2.</span> <span class="toc-text">重启服务器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%AE%89%E8%A3%85%E4%B8%8E%E5%AE%89%E5%85%A8%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97"><span class="toc-number">3.</span> <span class="toc-text">宝塔面板安装与安全优化指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF"><span class="toc-number">3.1.</span> <span class="toc-text">安装宝塔面板</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.1.</span> <span class="toc-text">安装过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF"><span class="toc-number">3.2.</span> <span class="toc-text">登录宝塔面板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%9F%BA%E7%A1%80%E5%AE%89%E5%85%A8"><span class="toc-number">3.3.</span> <span class="toc-text">设置宝塔面板基础安全</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E8%A7%84%E5%88%99"><span class="toc-number">3.3.1.</span> <span class="toc-text">设置防火墙规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Fail2Ban-%E9%98%B2%E6%AD%A2%E7%BD%91%E7%AB%99%E8%A2%AB%E7%88%86%E7%A0%B4"><span class="toc-number">3.3.2.</span> <span class="toc-text">安装 Fail2Ban 防止网站被爆破</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-Cloudflare-IP-%E7%99%BD%E5%90%8D%E5%8D%95%E9%99%90%E5%88%B680%E3%80%81443%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">3.3.3.</span> <span class="toc-text">通过 Cloudflare IP 白名单限制80、443端口的访问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E8%AE%BE%E7%BD%AE%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E7%9A%84%E8%B4%A6%E5%8F%B7%E5%92%8C%E5%AF%86%E7%A0%81"><span class="toc-number">3.3.4.</span> <span class="toc-text">重新设置宝塔面板的账号和密码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">3.4.</span> <span class="toc-text">服务器性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E6%95%B4-PHP-%E9%85%8D%E7%BD%AE%EF%BC%8C%E6%8F%90%E9%AB%98-WordPress-%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">3.4.1.</span> <span class="toc-text">调整 PHP 配置，提高 WordPress 兼容性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E6%95%B4-Nginx-%E9%85%8D%E7%BD%AE%EF%BC%8C%E6%8F%90%E9%AB%98-WordPress-%E9%80%9F%E5%BA%A6"><span class="toc-number">3.4.2.</span> <span class="toc-text">调整 Nginx 配置，提高 WordPress 速度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Redis-%E6%8F%90%E9%AB%98%E7%BC%93%E5%AD%98%E6%80%A7%E8%83%BD"><span class="toc-number">3.4.3.</span> <span class="toc-text">安装 Redis 提高缓存性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Linux%E5%B7%A5%E5%85%B7%E7%AE%B1"><span class="toc-number">3.4.4.</span> <span class="toc-text">安装 Linux工具箱</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WordPress%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E4%B8%8EHTTPS%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97"><span class="toc-number">4.</span> <span class="toc-text">WordPress一键部署与HTTPS配置指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%B9%B6%E5%88%9B%E5%BB%BA%E6%96%B0%E7%AB%99%E7%82%B9"><span class="toc-number">4.1.</span> <span class="toc-text">登录宝塔面板并创建新站点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%90%8E%E5%8F%B0"><span class="toc-number">4.1.1.</span> <span class="toc-text">登录宝塔面板后台</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5%E7%AB%99%E7%82%B9%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2"><span class="toc-number">4.2.</span> <span class="toc-text">进入站点管理界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%B0%E7%AB%99%E7%82%B9%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF"><span class="toc-number">4.3.</span> <span class="toc-text">配置新站点基础信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%8A%9F%E8%83%BD"><span class="toc-number">4.3.1.</span> <span class="toc-text">启用一键部署功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%83%A8%E7%BD%B2%E6%A8%A1%E6%9D%BF"><span class="toc-number">4.3.2.</span> <span class="toc-text">选择部署模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A1%AB%E5%86%99%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF"><span class="toc-number">4.3.3.</span> <span class="toc-text">填写域名信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="toc-number">4.3.4.</span> <span class="toc-text">设置网站根目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">4.3.5.</span> <span class="toc-text">调整其他配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.6.</span> <span class="toc-text">提交站点配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%88%90"><span class="toc-number">4.3.7.</span> <span class="toc-text">等待部署完成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6"><span class="toc-number">4.4.</span> <span class="toc-text">配置SSL证书</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cloudflare-SSL-%E6%BA%90%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7"><span class="toc-number">4.4.1.</span> <span class="toc-text">Cloudflare SSL 源证书申请</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%99%BB%E5%BD%95-Cloudflare-%E6%8E%A7%E5%88%B6%E9%9D%A2%E6%9D%BF"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">登录 Cloudflare 控制面板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5-SSL-TLS-%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">进入 SSL&#x2F;TLS 设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%88%B0-%E2%80%9C%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E2%80%9D-%E6%A0%87%E7%AD%BE"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">切换到 “源服务器” 标签</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%BA%90%E8%AF%81%E4%B9%A6"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">创建源证书</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%AF%81%E4%B9%A6%E5%92%8C%E7%A7%81%E9%92%A5%E5%86%85%E5%AE%B9"><span class="toc-number">4.4.1.5.</span> <span class="toc-text">复制证书和私钥内容</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9D%E5%A1%94%E4%B8%8A-WordPress-%E7%AB%99%E7%82%B9%E7%9A%84-SSL-%E8%AF%81%E4%B9%A6%E5%AF%B9%E6%8E%A5"><span class="toc-number">4.5.</span> <span class="toc-text">宝塔上 WordPress 站点的 SSL 证书对接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5-SSL-%E8%AF%81%E4%B9%A6%E9%85%8D%E7%BD%AE%E7%95%8C%E9%9D%A2"><span class="toc-number">4.5.1.</span> <span class="toc-text">进入 SSL 证书配置界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-SSL-%E8%AF%81%E4%B9%A6"><span class="toc-number">4.5.2.</span> <span class="toc-text">配置 SSL 证书</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-HTTPS-%E5%8F%8A%E5%85%B6%E4%BB%96%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.6.</span> <span class="toc-text">启用 HTTPS 及其他相关设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E4%BC%AA%E9%9D%99%E6%80%81"><span class="toc-number">4.7.</span> <span class="toc-text">启用伪静态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%88%90WordPress%E5%AE%89%E8%A3%85%E5%90%91%E5%AF%BC"><span class="toc-number">4.8.</span> <span class="toc-text">完成WordPress安装向导</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%AE%89%E8%A3%85%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.8.1.</span> <span class="toc-text">访问安装页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A1%AB%E5%86%99%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="toc-number">4.8.2.</span> <span class="toc-text">填写数据库信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">4.8.3.</span> <span class="toc-text">完成安装配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96"><span class="toc-number">4.8.4.</span> <span class="toc-text">初始配置优化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.8.4.1.</span> <span class="toc-text">基础设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E9%93%BE%E6%8E%A5%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.8.4.2.</span> <span class="toc-text">固定链接设置</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WordPress%E5%AE%89%E5%85%A8%E4%B8%8E%E6%80%A7%E8%83%BD%E5%85%A8%E9%9D%A2%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97"><span class="toc-number">5.</span> <span class="toc-text">WordPress安全与性能全面优化指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E4%BC%98%E5%8C%96"><span class="toc-number">5.1.</span> <span class="toc-text">安全优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">5.2.</span> <span class="toc-text">性能优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%96%B9%E9%9D%A2%E5%A2%9E%E5%BC%BA%E7%BD%91%E7%AB%99%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97"><span class="toc-number">6.</span> <span class="toc-text">多方面增强网站安全配置指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2Cloudflare%E7%9A%84WAF%E8%A7%84%E5%88%99"><span class="toc-number">6.1.</span> <span class="toc-text">部署Cloudflare的WAF规则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%BE%E8%A1%8C%E8%87%AA%E5%B7%B1%E5%8E%9F%E7%AB%99IP"><span class="toc-number">6.1.1.</span> <span class="toc-text">放行自己原站IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%BE%E8%A1%8CSEO%E7%88%AC%E8%99%AB"><span class="toc-number">6.1.2.</span> <span class="toc-text">放行SEO爬虫</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E5%9B%BD%E5%A4%96"><span class="toc-number">6.1.3.</span> <span class="toc-text">屏蔽国外</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%A8%E8%AF%A2%E6%81%B6%E6%84%8F%E6%B5%81%E9%87%8F"><span class="toc-number">6.1.4.</span> <span class="toc-text">质询恶意流量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%A8%E8%AF%A2%E6%81%B6%E6%84%8F%E6%B5%8F%E8%A7%88-%E5%A2%9E%E5%BC%BA%E7%89%88%EF%BC%89"><span class="toc-number">6.1.5.</span> <span class="toc-text">质询恶意浏览(增强版）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6"><span class="toc-number">6.2.</span> <span class="toc-text">部署频率限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEFail2Ban"><span class="toc-number">6.3.</span> <span class="toc-text">设置Fail2Ban</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AENginx%E5%85%8D%E8%B4%B9%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">6.4.</span> <span class="toc-text">设置Nginx免费防火墙</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/p/windows-activation-guide-2025/" title="2025年最新版 Windows 永久激活指南（MAS + HEU 双方案）"><img src="/images/d59259c3bf85465db11508a911e1900f.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025年最新版 Windows 永久激活指南（MAS + HEU 双方案）"/></a><div class="content"><a class="title" href="/p/windows-activation-guide-2025/" title="2025年最新版 Windows 永久激活指南（MAS + HEU 双方案）">2025年最新版 Windows 永久激活指南（MAS + HEU 双方案）</a><time datetime="2025-05-28T06:01:50.000Z" title="发表于 2025-05-28 14:01:50">2025-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/google-signup-no-phone/" title="想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号"><img src="/images/b4f90681a5894076b5dc38296c462071.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号"/></a><div class="content"><a class="title" href="/p/google-signup-no-phone/" title="想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号">想注册 Google 账号却不想填手机号？教你跳过手机验证并成功创建账号</a><time datetime="2025-05-20T06:01:50.000Z" title="发表于 2025-05-20 14:01:50">2025-05-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/wordpress-setup-bt-panel-cloudflare/" title="从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）"><img src="/images/6471a2eb417f472e9e3e645b4ea1937a.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）"/></a><div class="content"><a class="title" href="/p/wordpress-setup-bt-panel-cloudflare/" title="从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）">从零开始：使用宝塔面板搭建和优化 WordPress 站点（含 Cloudflare 配置和插件配置）</a><time datetime="2025-05-18T12:30:00.000Z" title="发表于 2025-05-18 20:30:00">2025-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/hidns-free-domain-guide/" title="HiDNS 终身免费域名详细申请流程（零基础新手友好教程）"><img src="/images/9e61239f07784140a375f5198686b4c7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HiDNS 终身免费域名详细申请流程（零基础新手友好教程）"/></a><div class="content"><a class="title" href="/p/hidns-free-domain-guide/" title="HiDNS 终身免费域名详细申请流程（零基础新手友好教程）">HiDNS 终身免费域名详细申请流程（零基础新手友好教程）</a><time datetime="2025-05-08T04:50:54.000Z" title="发表于 2025-05-08 12:50:54">2025-05-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/win-key-recovery/" title="最全教程：如何在 Win10 / Win11 系统中找回激活产品密钥（含 wmic 命令失效后的替代方案）"><img src="/images/3da9f924ce9d49ebb032d0bc7fff31c2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="最全教程：如何在 Win10 / Win11 系统中找回激活产品密钥（含 wmic 命令失效后的替代方案）"/></a><div class="content"><a class="title" href="/p/win-key-recovery/" title="最全教程：如何在 Win10 / Win11 系统中找回激活产品密钥（含 wmic 命令失效后的替代方案）">最全教程：如何在 Win10 / Win11 系统中找回激活产品密钥（含 wmic 命令失效后的替代方案）</a><time datetime="2025-04-24T04:50:54.000Z" title="发表于 2025-04-24 12:50:54">2025-04-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/6471a2eb417f472e9e3e645b4ea1937a.webp);"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Haib</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'

  const loadLivere = (el, path) => {
    window.livereOptions = {
      refer: path || location.pathname
    }

    if (isShuoshuo) {
      window.shuoshuoComment.destroyLivere = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    if (typeof LivereTower === 'object') window.LivereTower.init()
    else {
      (function(d, s) {
          var j, e = d.getElementsByTagName(s)[0];
          if (typeof LivereTower === 'function') { return; }
          j = d.createElement(s);
          j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
          j.async = true;
          e.parentNode.insertBefore(j, e);
      })(document, 'script');
    }
  }

  if (isShuoshuo) {
    'Livere' === 'Livere'
      ? window.shuoshuoComment = { loadComment: loadLivere }
      : window.loadOtherComment = loadLivere
    return
  }

  if ('Livere' === 'Livere' || !false) {
    if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
    else loadLivere()
  } else {
    window.loadOtherComment = loadLivere
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>